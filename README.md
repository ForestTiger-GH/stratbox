# Strategy Box (stratbox)

## Назначение

`stratbox` — Python-библиотека, которая помогает стандартизировать “бытовые” задачи вокруг анализа данных: чтение/запись файлов, простые преобразования, единая точка входа для IO-операций и (при необходимости) подключаемые провайдеры инфраструктуры.

Проект задуман как “коробка инструментов”: код накапливается, переиспользуется и постепенно расширяется под новые рабочие сценарии.

## Что уже есть в текущей версии

- **Единый IO API** (`stratbox.base.ioapi`):
  - Excel: чтение/запись DataFrame
  - CSV: чтение/запись DataFrame
  - XML: чтение/запись строк
  - Bytes: универсальное чтение/запись байтов
  - Archives: базовые операции с zip-архивами
- **Файловое хранилище (FileStore)**: интерфейс для чтения/записи файлов “как единого пространства”.
  - В базовой поставке доступен **локальный** `LocalFileStore` (обычная файловая система).
  - Дополнительно может подключаться внешний провайдер (например, корпоративный плагин), который перенаправит операции на сетевое хранилище.

## Быстрый старт

### Установка

```bash
pip install stratbox
```

(Либо установка из исходников/архива — в зависимости от того, как устроен процесс доставки в конкретной среде.)

### Пример: запись Excel в локальную файловую систему

```python
import pandas as pd
from stratbox.base import ioapi as ia

df = pd.DataFrame({"a": [1, 2], "b": [3, 4]})
ia.excel.write_df("out.xlsx", df)

df2 = ia.excel.read_df("out.xlsx")
print(df2.head())
```

### Пример: чтение/запись через FileStore

Во многих сценариях удобно мыслить “путями внутри хранилища” (а не абсолютными путями ОС).  
Когда подключён соответствующий провайдер FileStore, тот же код начнёт работать с удалённым хранилищем без изменения логики.

```python
from stratbox.base import ioapi as ia

# Путь воспринимается как путь внутри активного FileStore
df = ia.excel.read_df("reports/monthly/report.xlsx")
ia.csv.write_df("exports/report.csv", df)
```

Если провайдер не подключён, используется локальное хранилище.

## Структура проекта

- `stratbox/base/` — базовая инфраструктура: runtime, filestore, секреты, ioapi
- `stratbox/base/ioapi/` — “прикладные” модули ввода/вывода (Excel/CSV/XML/Bytes/Archives)
- `stratbox/base/filestore/` — реализация локального стора и общий интерфейс

## Принципы проекта

- **Простота для пользователя**: основной сценарий — использовать короткие вызовы `ia.excel`, `ia.csv` и т.п.
- **Расширяемость**: окружение может подменять провайдеры (например, FileStore и Secrets) через plug-in механизм.
- **Безопасность по умолчанию**: библиотека не хранит секреты в коде; интеграции должны вытягивать секреты из окружения/файлов конфигурации/секрет-хранилищ.

## Совместимость

- Python 3.10+ (ориентир; точная версия зависит от `pyproject.toml`)

## Лицензия и вклад

- Проект предполагает аккуратные PR: небольшие изменения, тестовые примеры, понятные сообщения коммитов.
- Для новых IO-модулей рекомендуется придерживаться единого стиля: чтение/запись через `read_*` / `write_*`, возвращать понятные ошибки и не печатать лишнее в stdout.
